<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ƒêƒÉng nh·∫≠p</title>
  <link rel="icon" type="image/png" href="icon.png" />
  <link rel="stylesheet" href="/styles.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  <style>
    body {
      font-family: "Times New Roman", sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }

    .container {
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      padding: 30px;
      width: 80%;
      transition: all 1s ease;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    @media (min-width: 768px) {
      .container {
        width: 350px;
      }
    }

    .container.dk {
      /* background-color: #e3ffe3; */
      border: outset;
    }

    .container:hover.dk {
      box-shadow: 0 2px 5px rgb(0 255 41);
    }

    .container:hover {
      box-shadow: 0 5px 10px rgba(110, 170, 255, 0.5);
    }

    @keyframes cbl {
      0% {
        background-position: 0 0;
      }

      100% {
        background-position: 1280px -720px;
      }
    }

    @keyframes tbl {
      0% {
        background-position: 0 0;
      }

      100% {
        background-position: -128px 128px;
      }
    }

    .bgtitle::before {
      position: absolute;
      top: 0;
      left: 0;
      z-index: -2;
      animation: cbl 6s linear infinite;
      background-image: url(img/rbg.png);
      background-size: 1280px 720px;
      width: 100%;
      height: 100%;
      pointer-events: none;
      content: "";
    }

    img.bg {
      position: fixed;
      top: 0;
      left: 0;
      z-index: -3;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    img.tbg {
      position: absolute;
      top: 0;
      left: 0;
      z-index: -3;
      animation: tbl 6s linear infinite;
      image-rendering: pixelated;
      background-image: url(img/bookshelf.png);
      background-size: 128px 128px;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .toggle-button {
      position: absolute;
      bottom: 10px;
      right: 10px;
      padding: 8px 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
    }

    .bg-hidden {
      display: none;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #333;
    }

    label {
      display: block;
      margin-bottom: 5px;
      color: #555;
    }

    input[type="text"],
    input[type="password"] {
      width: -webkit-fill-available;
      padding: 12px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      transition: border-color 0.3s ease;
    }

    input[type="text"]:focus,
    input[type="password"]:focus {
      outline: none;
      border-color: #4caf50;
    }

    input[type="text"]:hover,
    input[type="password"]:hover {
      border-color: #0037ff;
    }

    button {
      padding: 12px 25px;
      font-family: "Times New Roman", sans-serif;
      font-size: medium;
      background-color: #4caf50;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      transition: transform 0.3s ease, background-color 0.3s ease;
      display: block;
      margin: 0 auto;
      width: fit-content;
    }

    button.dk {
      background-color: #4c60af;
    }

    button:hover {
      transform: scale(1.1);
      background-color: #218838;
    }

    button:hover.dk {
      background-color: #414094;
    }

    .register-link {
      text-align: center;
      margin-top: 10px;
      font-size: 14px;
    }

    .register-link a {
      color: #0037ff;
      text-decoration: none;
    }

    .register-link a:hover {
      text-decoration: underline;
    }

    .login-form,
    .register-form {
      display: none;
    }

    .show {
      display: block;
    }

    nav {
      display: flex;
      gap: 15px;
      padding-right: 20px;
    }

    .rgb-button {
      display: inline-block;
      position: absolute;
      bottom: 10px;
      right: 30px;
      width: 20px;
      height: 20px;
      cursor: pointer;
    }

    .rgb-button.amin {
      right: 55px;
    }

    .paused {
      animation-play-state: paused !important;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="login-form show">
      <h1>ƒêƒÉng Nh·∫≠p</h1>
      <form action="/login" method="POST">
        <label for="username">T√™n ƒëƒÉng nh·∫≠p:</label>
        <input type="text" id="username" name="username" required />
        <br />
        <label for="password">M·∫≠t kh·∫©u:</label>
        <input type="password" id="password" name="password" required />
        <br />
        <button type="submit">ƒêƒÉng nh·∫≠p</button>
      </form>
    </div>

    
  </div>
  <div id="registration-popup" class="popup-BG" style="display: none">
    <div class="popup">
      <h2 class="popup-title">üö® Th√¥ng b√°o üö®</h2>
      <div class="popup-content">
        <p></p>
        <p id="registration-message">üö®</p>
        <button class="popup-button" onclick="closePopup()">Yes sir</button>
      </div>
    </div>
  </div>

  <!-- <video id="bgVideo" style="z-index: -1" playsinline="" muted="muted" loop="loop" autoplay="autoplay" > <source src="https://nxm-clw-cdn.dn.nexoncdn.co.kr/bluearchive/img/events/2024/04/live_1dk292g/bg_video_jp.mp4" type="video/mp4" /> </video> -->
  <div class="bgtitle bg-hidden"></div>
  <img src="img/x-n_cg1_bg.png" alt="BG" class="bg bg-hidden" />
  <img src="#" alt="·ª®ng d·ª•ng qu·∫£n l√Ω th∆∞ vi·ªán tr·ª±c tuy·∫øn" class="tbg" />
  <nav>
    <img src="img/RGB.png" alt="" title="T·∫Øt/B·∫≠t n·ªÅn m√†u" class="rgb-button" onclick="RGBbg()"></img>
    <!-- <button class="toggle-button" onclick="toggleBackground()"></button> -->
    <img src="img/bookshelf_0.png" class="rgb-button amin" title="T·∫Øt/B·∫≠t animation" onclick="Aminbg()"></img>
  </nav>
  <script>
    function toggleBackground() {
      document.querySelector(".bg").classList.toggle("bg-hidden");
      document.querySelector(".tbg").classList.toggle("bg-hidden");
    }
    function Aminbg() { document.querySelector(".tbg").classList.toggle("paused"); }
    function RGBbg() { document.querySelector(".bgtitle").classList.toggle("bg-hidden"); }
    //=--------------------------------------------------------ADD

    const formB = document.getElementById("registerForm");
    formB.addEventListener("submit", (event) => {
      event.preventDefault();
      const username = formB.querySelector("#username").value;
      const password = formB.querySelector("#password").value;
      const role = formB.querySelector("#role").value;
      if (password !== formB.querySelector("#confirm_password").value) {
        alert('Hai m·∫≠t kh·∫©u kh√¥ng tr√πng kh·ªõp!');
      } else {
        fetch("/register", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ username, password, role }),
        })
        .then((response) => {
          // if (response.status === 201) {
          // $("#registration-message").text("ƒêƒÉng k√Ω th√†nh c√¥ng!");
          // $("#registration-popup").show();
          // } else {
          response.json().then((data) => {
            $("#registration-message").text(data.message);
            $("#registration-popup").show();
          });
          // }
        })
        .catch((error) => {
          console.error("L·ªói khi ƒëƒÉng k√Ω:", error);
          $("#registration-message").text("L·ªói m√°y ch·ªß. Vui l√≤ng th·ª≠ l·∫°i sau.");
          $("#registration-popup").show();
        });
      }
    });
    function closePopup() { $("#registration-popup").hide(); }
  </script>
</body>

</html>